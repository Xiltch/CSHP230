@model  Assignment08.Models.Class
@using Assignment08.Helpers
@using Assignment08.Models

@{
    ViewBag.Title = "Details";
}

<br />

<div class="container no-gutters">
    <div class="row justify-content-start">
        <div class="col-sm-4 ">
            <div class="form-group row h3">
                Class Details
            </div>
            <div class="form-group row">
                <div class="col-4">
                    <label class="font-weight-bold">Name</label>
                </div>
                <div class="col-8">
                    @Html.DisplayFor(model => model.Name)
                </div>
            </div>
            <div class="form-group row">
                <div class="col-4">
                    <label class="font-weight-bold">Date</label>
                </div>
                <div class="col-8">
                    @Html.DisplayDateOnlyFor(model => model.Date)
                </div>
            </div>
            <div class="form-group row">
                <div class="col-4">
                    <label class="font-weight-bold">Description</label>
                </div>
                <div class="col-8">
                    @Html.DisplayFor(model => model.Description)
                </div>
            </div>

            @if (Session["currentUser"] != null)
            {
                <div style="margin: 10px">
                    @if (Session["currentUser"] is Student currentUser && Model.Students.Contains(currentUser, new StudentComparer()))
                    {
                        @Html.ActionLink("Unregister", "Unregister", "Class", new { classId = Model.Id }, new { @class = "btn btn-primary" })
                    }
                    else
                    {
                        @Html.ActionLink("Register", "Register", "Class", new { classId = Model.Id }, new { @class = "btn btn-primary" })
                    }
                </div>
            }

        </div>

        <div class="col-sm-8">
            <div class="h3">Registered Students</div>

            <table class="table table-striped">

                @foreach (var item in Model.Students)
                {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                    </tr>
                }

            </table>
        </div>
    </div>
</div>
